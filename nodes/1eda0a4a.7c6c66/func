const TIMER = 10;// minutes
const DELAY = TIMER * 60 * 1000;

var eventMsg = msg;
eventMsg.delay = DELAY;
eventMsg.payload = 'start';

var timerMsg = [];
if (flow.get('timerOn') === true) {
    timerMsg.push({ reset: true });
    node.log('[Corridor] timer reset')
} else {
    flow.set('timerOn', true);
}

timerMsg.push({
    delay: DELAY,
    payload: { on: false }
});

node.log('[Corridor] turn off in ' + TIMER + 'min')

return [ eventMsg, timerMsg ];