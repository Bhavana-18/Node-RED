const MAX_COUNT = 3;

var lights = flow.get('lights') || {};
var anyOn = lights.living === true ||
    lights.dining === true;

var count = flow.get('count') || 0;
if (anyOn === true) {
    if (++count >= MAX_COUNT) {
        count = 0
    }
    flow.set('count', count);
}
msg.payload.count = count;

node.log('[Ground floor] toggle count (' + count + ')');

return msg;